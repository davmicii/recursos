CREATE DATABASE Escuela;


IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Maestro')
CREATE TABLE Maestro (idMaestro INT IDENTITY(1,1) PRIMARY KEY, nombre VARCHAR(255), apellido VARCHAR(255), titulo VARCHAR(255));

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Materia')
CREATE TABLE Materia (idMateria INT IDENTITY(1,1) PRIMARY KEY, Descripcion VARCHAR(255), Puntos VARCHAR(255));

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Alumnos')
CREATE TABLE Alumnos (idAlumno INT IDENTITY(1,1) PRIMARY KEY, nombre VARCHAR(255), apellido VARCHAR(255), Maestro_Id INT, FOREIGN KEY (Maestro_Id) REFERENCES Maestro(idMaestro));

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Alumno_has_Materias')
CREATE TABLE Alumno_has_Materias (Alumno_id INT, Materia_id INT, FOREIGN KEY (Alumno_id) REFERENCES Alumnos(idAlumno), FOREIGN KEY (Materia_id) REFERENCES Materia(idMateria));

IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Usuario')
CREATE TABLE Usuario (idUsuario INT IDENTITY(1,1) PRIMARY KEY, correo VARCHAR(255), contrasenia VARCHAR(255));